<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Pip Blaster â€” Admin</title>

<style>
body{background:#05080f;color:#fff;font-family:Inter;padding:40px}
.card{background:#0e1526;padding:20px;border-radius:16px;max-width:420px}
input,button{width:100%;padding:12px;margin-top:10px;border-radius:10px;border:none}
button{background:#00ffd1;font-weight:700;cursor:pointer}
.status{margin-top:10px;color:#00ffd1}
</style>
</head>

<body>
<div class="card" id="login">
<h3>Admin Login</h3>
<input id="key" type="password" placeholder="Admin key"/>
<button onclick="login()">Login</button>
</div>

<div class="card" id="panel" style="display:none">
<h3>Metrics</h3>
<input id="targetApy" placeholder="Target APY"/>
<input id="activeApy" placeholder="Active APY"/>
<input id="dailyPerf" placeholder="Daily Perf"/>
<button onclick="saveMetrics()">Save Metrics</button>

<h3 style="margin-top:20px">User Profit</h3>
<input id="wallet" placeholder="Wallet"/>
<input id="profit" placeholder="Profit"/>
<button onclick="saveProfit()">Save Profit</button>

<div class="status" id="status"></div>
</div>

<script>
const ADMIN_KEY="SUPER_SECRET_KEY";

function login(){
  if(key.value!==ADMIN_KEY) return alert("Invalid");
  login.style.display="none";
  panel.style.display="block";
  loadMetrics();
}

async function loadMetrics(){
  const r=await fetch("/api/metrics");
  const d=await r.json();
  targetApy.value=d.targetApy;
  activeApy.value=d.activeApy;
  dailyPerf.value=d.dailyPerf;
}

async function saveMetrics(){
  await fetch("/api/metrics",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      targetApy:targetApy.value,
      activeApy:activeApy.value,
      dailyPerf:dailyPerf.value
    })
  });
  status.textContent="Metrics updated";
}

async function saveProfit(){
  await fetch("/api/profit",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      wallet:wallet.value,
      profit:profit.value
    })
  });
  status.textContent="Profit saved";
}
</script>
</body>
</html>
